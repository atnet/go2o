/**
 * This file is auto generated by tto v0.5.7 !
 * If you want to modify this code, please read the guide
 * to modify code template.
 *
 * Get started: https://github.com/ixre/tto
 *
 * Copyright (C) 2009-2024 56X.NET, All rights reserved.
 *
 * name : sys_sub_station_dao_impl.go
 * author : root
 * date : 2024/05/29 17:31:31
 * description :
 * history :
 */
package repos

import (
	"github.com/ixre/go2o/core/domain/interface/sys"
	si "github.com/ixre/go2o/core/domain/sys"
	"github.com/ixre/go2o/core/infrastructure/fw"
)

var _ sys.IStationRepo = new(stationRepoImpl)

// 站点仓储
type stationRepoImpl struct {
	_manager sys.IStationManager
	sysRepo  sys.ISystemRepo
	fw.BaseRepository[sys.SubStation]
}

var modelIsMapped = false

// NewStationRepo Create new StationRepo
func NewStationRepo(o fw.ORM, sysRepo sys.ISystemRepo) sys.IStationRepo {
	s := &stationRepoImpl{
		sysRepo: sysRepo,
	}
	s.ORM = o
	return s
}

// CreateStation implements sys.IStationRepo.
func (s *stationRepoImpl) CreateStation(v *sys.SubStation) sys.IStationDomain {
	return si.NewStation(v, s)
}

// GetSubStation Get 地区子站
func (s *stationRepoImpl) GetStation(id int) sys.IStationDomain {
	v := s.Get(id)
	if v == nil {
		return nil
	}
	return s.CreateStation(v)
}

// GetStations implements sys.IStationRepo.
func (s *stationRepoImpl) GetStations() []*sys.SubStation {
	return s.FindList(nil, "")
}

// SaveSubStation Save 地区子站
func (s *stationRepoImpl) SaveStation(v *sys.SubStation) (int, error) {
	dst, err := s.Save(v)
	if err != nil {
		return 0, err
	}
	return dst.Id, nil
}
